<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel de Projetos â€” Henrique Neves</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background-color: #f2f4f8;
    font-family: "Inter", Arial, sans-serif;
  }

  #toolbar {
    position: fixed;
    top: 10px;
    left: 10px;
    background: white;
    padding: 8px 12px;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    z-index: 1000;
  }

  #toolbar select, #toolbar button {
    margin-right: 8px;
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid #ddd;
    font-size: 14px;
  }

  #canvas {
    width: 5000px;
    height: 3000px;
    position: relative;
    background: repeating-linear-gradient(45deg, #fafafa, #fafafa 49px, #f0f0f0 50px);
    transform-origin: 0 0;
  }

  .card {
    position: absolute;
    width: 230px;
    min-height: 120px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.15);
    padding: 10px;
    cursor: grab;
    color: #222;
    transition: transform 0.1s;
  }

  .card:active {
    cursor: grabbing;
    transform: scale(1.02);
  }

  .area-pesquisa { background: #d6eaff; }
  .area-evento { background: #fce4ec; }
  .area-app { background: #dff8df; }
  .area-mentoria { background: #fff4d6; }
  .area-pessoal { background: #e8e8e8; }

  textarea {
    width: 100%;
    height: 70px;
    border: none;
    background: transparent;
    resize: none;
    outline: none;
    font-size: 14px;
  }

  a {
    color: #0056b3;
    text-decoration: none;
    font-size: 13px;
  }

  a:hover { text-decoration: underline; }
</style>
</head>
<body>
<div id="toolbar">
  <select id="area">
    <option value="area-pesquisa">ğŸ”¬ Pesquisa</option>
    <option value="area-evento">ğŸ¤ Evento</option>
    <option value="area-app">ğŸ’» App</option>
    <option value="area-mentoria">ğŸ§  Mentoria</option>
    <option value="area-pessoal">ğŸŒ¿ Pessoal</option>
  </select>
  <button id="addCard">â• Novo Card</button>
  <button id="saveLayout">ğŸ’¾ Salvar</button>
  <button id="reset">ğŸ—‘ï¸ Limpar</button>
</div>

<div id="canvas"></div>

<script>
const canvas = document.getElementById('canvas');
const areaSelect = document.getElementById('area');
const addCardBtn = document.getElementById('addCard');
const saveBtn = document.getElementById('saveLayout');
const resetBtn = document.getElementById('reset');

// Pan e Zoom
let scale = 1, originX = 0, originY = 0, isPanning = false, startX, startY;
document.body.addEventListener('wheel', e => {
  e.preventDefault();
  const delta = e.deltaY > 0 ? 0.9 : 1.1;
  scale *= delta;
  canvas.style.transform = `translate(${originX}px, ${originY}px) scale(${scale})`;
});

document.body.addEventListener('mousedown', e => {
  if (e.target === canvas) {
    isPanning = true;
    startX = e.clientX - originX;
    startY = e.clientY - originY;
  }
});
document.body.addEventListener('mouseup', () => isPanning = false);
document.body.addEventListener('mousemove', e => {
  if (!isPanning) return;
  originX = e.clientX - startX;
  originY = e.clientY - startY;
  canvas.style.transform = `translate(${originX}px, ${originY}px) scale(${scale})`;
});

// Salvar e carregar
const saved = JSON.parse(localStorage.getItem('canvasLayoutV2')) || [];
saved.forEach(c => addCard(c.text, c.x, c.y, c.area, c.link));

addCardBtn.onclick = () => addCard("Novo projeto", 200, 200, areaSelect.value, "");

saveBtn.onclick = () => {
  const cards = [...document.querySelectorAll('.card')].map(card => ({
    text: card.querySelector('textarea').value,
    link: card.querySelector('a').href,
    area: card.dataset.area,
    x: card.offsetLeft,
    y: card.offsetTop
  }));
  localStorage.setItem('canvasLayoutV2', JSON.stringify(cards));
  alert("Layout salvo!");
};

resetBtn.onclick = () => {
  if (confirm("Tem certeza que deseja limpar tudo?")) {
    localStorage.clear();
    location.reload();
  }
};

function addCard(text, x, y, area, link) {
  const card = document.createElement('div');
  card.className = `card ${area}`;
  card.dataset.area = area;
  card.style.left = x + 'px';
  card.style.top = y + 'px';
  card.innerHTML = `
    <textarea>${text}</textarea>
    <a href="${link || '#'}" target="_blank">ğŸ”— Link</a>
  `;
  makeDraggable(card);
  canvas.appendChild(card);
}

function makeDraggable(el) {
  let offsetX, offsetY;
  el.onmousedown = e => {
    if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'A') return;
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;
    document.onmousemove = e => {
      el.style.left = (e.clientX - offsetX) + 'px';
      el.style.top = (e.clientY - offsetY) + 'px';
    };
    document.onmouseup = () => document.onmousemove = null;
  };
}
</script>
</body>
</html>
